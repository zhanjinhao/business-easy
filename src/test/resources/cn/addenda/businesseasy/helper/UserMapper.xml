<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.addenda.businesseasy.helper.UserMapper">

        <insert id="insertConsumer" useGeneratedKeys="false">
            insert into ts_user(USER_ID, USERNAME, IS_DEL, STATUS, ACTIVE_TM, DEACTIVE_TM, MODIFIER_USER, MODIFY_TM, CREATOR_USER, CREATE_TM, AUTOGRAPH, AUTO_DEL_SIGN)
            values (#{userId,jdbcType=VARCHAR}, #{username,jdbcType=VARCHAR}, #{isDel,jdbcType=INTEGER}, #{status,jdbcType=VARCHAR},
                    #{activeTm,jdbcType=TIMESTAMP}, #{deactiveTm,jdbcType=TIMESTAMP}, #{modifierUser,jdbcType=VARCHAR}, #{modifyTm,jdbcType=TIMESTAMP},
                    #{creatorUser,jdbcType=VARCHAR}, #{createTm,jdbcType=TIMESTAMP}, #{autoDelSign,jdbcType=INTEGER}, #{autoDelSign,jdbcType=INTEGER}),

                   (concat(#{userId,jdbcType=VARCHAR}, 'X'), #{username,jdbcType=VARCHAR}, #{isDel,jdbcType=INTEGER}, #{status,jdbcType=VARCHAR},
                    #{activeTm,jdbcType=TIMESTAMP}, #{deactiveTm,jdbcType=TIMESTAMP}, #{modifierUser,jdbcType=VARCHAR}, #{modifyTm,jdbcType=TIMESTAMP},
                    #{creatorUser,jdbcType=VARCHAR}, #{createTm,jdbcType=TIMESTAMP}, #{autoDelSign,jdbcType=INTEGER}, #{autoDelSign,jdbcType=INTEGER})
        </insert>

        <insert id="insertFunction" useGeneratedKeys="false">
            insert into ts_user(USER_ID, USERNAME, IS_DEL, STATUS, ACTIVE_TM, DEACTIVE_TM, MODIFIER_USER, MODIFY_TM, CREATOR_USER, CREATE_TM, AUTOGRAPH, AUTO_DEL_SIGN)
            values (#{userId,jdbcType=VARCHAR}, #{username,jdbcType=VARCHAR}, #{isDel,jdbcType=INTEGER}, #{status,jdbcType=VARCHAR},
                    #{activeTm,jdbcType=TIMESTAMP}, #{deactiveTm,jdbcType=TIMESTAMP}, #{modifierUser,jdbcType=VARCHAR}, #{modifyTm,jdbcType=TIMESTAMP},
                    #{creatorUser,jdbcType=VARCHAR}, #{createTm,jdbcType=TIMESTAMP}, #{autoDelSign,jdbcType=INTEGER}, #{autoDelSign,jdbcType=INTEGER})
        </insert>

        <update id="updateConsumer">
            update ts_user
            set ACTIVE_TM = now()
            where user_id like concat(#{prefix,jdbcType=VARCHAR}, '%')
        </update>

        <update id="updateFunction">
            update ts_user
            set ACTIVE_TM = now()
            where user_id like concat(#{prefix,jdbcType=VARCHAR}, '%')
        </update>

        <delete id="deleteConsumer">
            delete
            from ts_user
            where user_id like concat(#{prefix,jdbcType=VARCHAR}, '%')
        </delete>

        <delete id="deleteFunction">
            delete
            from ts_user
            where user_id like concat(#{prefix,jdbcType=VARCHAR}, '%')
        </delete>
</mapper>